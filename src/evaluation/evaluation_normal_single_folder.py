import os
import sys
sys.path.insert(0, '../utils')
from read_files import read_files
from verifinger_single_evaluate import evaluate_single_verifinger


def main():

    if ( len(sys.argv) < 3 ):
        print('Usage: python '+sys.argv[0]+ ' <input_dir>')
        print('\t input_dir: this folder should include all the images generated by gan')
        print('\t eval_dir: the results will be stored in this folder')
        sys.exit(0)

    # parse command line parameters
    input_dir =  sys.argv[1]
    eval_dir =  sys.argv[2]
    if not os.path.exists(eval_dir):
        os.makedirs(eval_dir)

    eval_file_path = eval_dir + '/latest.txt'

    # get the unique files
    unique_files = read_files(input_dir)

    # call the evaluation function
    evaluate_single_verifinger(input_dir, unique_files, eval_file_path)


if __name__ == '__main__':
    main()